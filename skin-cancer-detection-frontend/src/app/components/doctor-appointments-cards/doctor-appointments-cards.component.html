<div *ngFor="let appointment of appointments" class="appointment-card" 
     [class.pending]="appointment.status === 'pending'"
     [class.booked]="appointment.status === 'book' || 'rate'"
     [class.canceled]="appointment.status === 'cancel'">
  
  <div class="card-accent"></div>
  
  <div class="card-content">
    <div class="card-header">
      <div class="appointment-meta">
        <span class="patient-id">#{{appointment.patient_id}}</span>
        <span class="appointment-date">{{appointment.date_time | date:'MMM d, y, h:mm a'}}</span>
      </div>
      <div class="status-pill" 
           [class.pending]="appointment.status === 'pending'"
           [class.booked]="appointment.status === 'book' || 'rate'"
           [class.canceled]="appointment.status === 'cancel'">
        {{appointment.status === 'pending' ? 'Pending' : 
          appointment.status === 'cancel' ? 'Canceled' : 'Booked'}}
      </div>
    </div>

    <h3 class="appointment-title">{{appointment.notes || 'Medical Appointment'}}</h3>

    <div class="card-actions">
      <!-- Show confirm and cancel buttons for pending appointments -->
      <div *ngIf="appointment.status === 'pending'" class="button-group">
        <button (click)="cancelAppointment(appointment.appointment_id)" class="cancel-btn">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
          </svg>
          Cancel
        </button>
        
        <button (click)="confirmAppointment(appointment.appointment_id)" class="confirm-btn">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
          </svg>
          Confirm Booking
        </button>
      </div>
      
      <!-- Show booked badge for booked appointments -->
      <div *ngIf="appointment.status === 'book' || appointment.status === 'rate'" class="booked-badge">
        <svg class="icon" viewBox="0 0 24 24">
          <path d="M12,2C6.48,2 2,6.48 2,12s4.48,10 10,10 10-4.48 10-10S17.52,2 12,2zm-2,15l-5-5 1.41-1.41L10,14.17l7.59-7.59L19,8l-9,9z"/>
        </svg>
        Appointment Booked
      </div>
      
      <!-- Show canceled badge for canceled appointments -->
      <div *ngIf="appointment.status === 'cancel'" class="canceled-badge">
        <svg class="icon" viewBox="0 0 24 24">
          <path d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"/>
        </svg>
        Appointment Canceled
      </div>
    </div>
  </div>
</div>